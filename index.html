<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Squared Animation with Login</title>
    <style>
        /* Import Roboto Mono font */
        @import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&display=swap');

        :root {
            --dark-bg: #0a0a1a;
            --glow-color-start: #00ffff;
            --glow-color-mid: #8a2be2;
            --glow-color-end: #e0e0e0;
            --flash-color: #ffffff;
            --text-color: #cccccc;
            --input-bg: #1a1a2a;
            --input-border: #444455;
            --input-text: #e0e0e0;

            /* Animation Timings */
            --anim-duration-enter: 2.5s;
            --anim-duration-merge: 0.5s;
            --anim-duration-symbol-appear: 0.8s;
            --anim-duration-text-appear: 1s;
            --anim-delay-text: 1.2s;
            --anim-duration-login-appear: 0.7s;
            --anim-delay-login: 0.5s;
            --anim-duration-shimmer: 3s;
            --anim-duration-color-shift: 10s;
            --fade-out-duration: 0.3s;
            /* New timing for iframe transition */
            --iframe-delay: 2s; /* Delay after login appears */
            --iframe-fade-in: 0.5s; /* Fade-in duration */
        }

        body {
            margin: 0; padding: 0; background-color: var(--dark-bg);
            color: var(--text-color); font-family: 'Arial', sans-serif;
            min-height: 100vh; overflow: hidden;
        }

        #content-wrapper {
            position: relative; width: 100%; height: 100vh;
            display: flex; justify-content: center; align-items: center;
        }

        #animation-container {
            position: relative; width: 80vw; max-width: 600px; height: auto;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            padding-bottom: 50px;
            transition: opacity var(--fade-out-duration) ease-out; /* For fade-out */
        }

        #symbol-area {
            position: relative; width: 100%; height: 300px;
            display: flex; justify-content: center; align-items: center;
            margin-bottom: 20px;
        }

        .symbol {
            position: absolute; font-size: clamp(4em, 10vw, 6em); font-weight: bold;
            opacity: 0; will-change: transform, opacity, color, text-shadow;
            transform-origin: center center;
            transition: opacity var(--fade-out-duration) ease-out;
        }

        /* --- AI Symbol --- */
        #ai-symbol {
            transform: translateX(-150%) scale(0.7); opacity: 0;
            animation: ai-enter var(--anim-duration-enter) ease-out forwards;
        }
        @keyframes ai-enter {
            0% { transform: translateX(-150%) scale(0.7); opacity: 0; }
            40% { opacity: 1; }
            100% { transform: translateX(-15%) scale(1.3); opacity: 1; }
        }

        /* --- IA Symbol --- */
        #ia-symbol {
            transform: translateX(150%) scale(0.7); opacity: 0;
            animation: ia-enter var(--anim-duration-enter) ease-out forwards;
        }
        @keyframes ia-enter {
            0% { transform: translateX(150%) scale(0.7); opacity: 0; }
            40% { opacity: 1; }
            100% { transform: translateX(15%) scale(1.3); opacity: 1; }
        }

        /* --- Merge Effect --- */
        #merge-effect {
            position: absolute; width: 20px; height: 20px;
            background-color: var(--flash-color); border-radius: 50%;
            opacity: 0; transform: scale(0);
            box-shadow: 0 0 15px 8px var(--flash-color);
            will-change: transform, opacity, box-shadow;
            display: none;
        }
        @keyframes merge-flash {
            0% { opacity: 0.8; transform: scale(0.5); box-shadow: 0 0 20px 10px var(--flash-color); }
            50% { opacity: 1; transform: scale(2.5); box-shadow: 0 0 50px 30px var(--flash-color); }
            100% { opacity: 0; transform: scale(0); box-shadow: 0 0 10px 5px var(--flash-color); }
        }
        .flash-active {
            display: block !important;
            animation: merge-flash var(--anim-duration-merge) ease-in-out forwards;
        }

        /* --- Merged AI^2 Symbol --- */
        #merged-symbol {
            position: absolute; font-size: clamp(5em, 12vw, 7em); font-weight: bold;
            opacity: 0; transform: scale(0.8);
            display: none;
            will-change: transform, opacity, color, text-shadow;
        }
        #merged-symbol sup {
            font-size: 0.6em; vertical-align: super; margin-left: 0.05em;
            font-weight: normal; line-height: 0; position: relative; top: -0.1em;
        }
        .appear-active {
            display: inline-block !important;
            animation:
                symbol-appear var(--anim-duration-symbol-appear) ease-out forwards,
                symbol-shimmer var(--anim-duration-shimmer) ease-in-out infinite alternate,
                symbol-color-shift var(--anim-duration-color-shift) linear infinite;
        }
        @keyframes symbol-appear {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }
        @keyframes symbol-shimmer {
            from { text-shadow: 0 0 6px rgba(255, 255, 255, 0.5), 0 0 12px var(--glow-color-start), 0 0 20px var(--glow-color-start); }
            to { text-shadow: 0 0 10px rgba(255, 255, 255, 0.7), 0 0 20px var(--glow-color-mid), 0 0 35px var(--glow-color-mid); }
        }
        @keyframes symbol-color-shift {
            0%   { color: var(--glow-color-start); } 33% { color: var(--glow-color-mid); }
            66%  { color: var(--glow-color-end); } 100% { color: var(--glow-color-start); }
        }

        /* --- Final Text "AI SQUARED" --- */
        #final-text {
            width: 100%; text-align: center; font-family: 'Roboto Mono', monospace;
            font-size: clamp(1em, 3vw, 1.5em); letter-spacing: 0.1em;
            opacity: 0; transform: translateY(25px);
            will-change: transform, opacity;
            display: none;
            margin-top: 10px;
        }
        .text-active {
            display: block !important;
            animation: text-fade-in var(--anim-duration-text-appear) ease-out forwards;
            animation-delay: var(--anim-delay-text);
        }
        @keyframes text-fade-in {
            from { opacity: 0; transform: translateY(25px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- Login Area --- */
        #login-area {
            width: 100%; max-width: 300px; margin-top: 30px;
            opacity: 0; display: none; will-change: opacity;
        }
        .login-active {
            display: block !important;
            animation: login-fade-in var(--anim-duration-login-appear) ease-out forwards;
            animation-delay: var(--anim-delay-login);
        }
        @keyframes login-fade-in {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        #login-area input {
            display: block; width: 90%; margin: 10px auto; padding: 12px 15px;
            background-color: var(--input-bg); border: 1px solid var(--input-border);
            border-radius: 4px; color: var(--input-text); font-size: 1em;
            font-family: 'Roboto Mono', monospace; box-sizing: border-box;
        }
        #login-area input::placeholder {
            color: #777788; opacity: 1;
        }

        /* --- Iframe Styles --- */
        #sites-iframe {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            border: none; opacity: 0; transition: opacity var(--iframe-fade-in) ease-in;
        }
        #sites-iframe.visible {
            opacity: 1;
        }
    </style>
</head>
<body>
    <div id="content-wrapper">
        <div id="animation-container">
            <div id="symbol-area">
                <span id="ai-symbol" class="symbol">AI</span>
                <span id="ia-symbol" class="symbol">IA</span>
                <div id="merge-effect"></div>
                <span id="merged-symbol" class="symbol">AI<sup>2</sup></span>
            </div>
            <div id="final-text">AI SQUARED</div>
            <div id="login-area">
                <input type="text" id="member-login" placeholder="Member Login">
                <input type="password" id="password" placeholder="Password">
            </div>
        </div>
        <iframe id="sites-iframe" src="https://sites.google.com/ai2.group/ai21landing"></iframe>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const aiSymbol = document.getElementById('ai-symbol');
            const iaSymbol = document.getElementById('ia-symbol');
            const mergeEffect = document.getElementById('merge-effect');
            const mergedSymbol = document.getElementById('merged-symbol');
            const finalText = document.getElementById('final-text');
            const loginArea = document.getElementById('login-area');
            const animationContainer = document.getElementById('animation-container');
            const sitesIframe = document.getElementById('sites-iframe');

            let aiFinished = false;
            let iaFinished = false;
            let mergeTriggered = false;
            let textFinished = false;

            function triggerMerge() {
                if (mergeTriggered) return;
                mergeTriggered = true;
                aiSymbol.style.opacity = '0';
                iaSymbol.style.opacity = '0';
                mergeEffect.addEventListener('animationend', handleMergeFlashEnd, { once: true });
                mergeEffect.classList.add('flash-active');
            }

            function handleMergeFlashEnd() {
                aiSymbol.style.display = 'none';
                iaSymbol.style.display = 'none';
                mergeEffect.style.display = 'none';
                mergedSymbol.classList.add('appear-active');
                finalText.classList.add('text-active');
                finalText.addEventListener('animationend', handleTextEnd, { once: true });
            }

            function handleTextEnd() {
                if (textFinished) return;
                textFinished = true;
                loginArea.classList.add('login-active');
                // Trigger iframe after login appears
                loginArea.addEventListener('animationend', handleLoginEnd, { once: true });
            }

            function handleLoginEnd() {
                setTimeout(() => {
                    animationContainer.style.opacity = '0';
                    animationContainer.addEventListener('transitionend', () => {
                        animationContainer.style.display = 'none';
                        sitesIframe.classList.add('visible');
                    }, { once: true });
                }, parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--iframe-delay')) * 1000);
            }

            aiSymbol.addEventListener('animationend', () => {
                aiFinished = true;
                if (iaFinished) triggerMerge();
            }, { once: true });

            iaSymbol.addEventListener('animationend', () => {
                iaFinished = true;
                if (aiFinished) triggerMerge();
            }, { once: true });

            const safetyTimeoutMerge = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--anim-duration-enter')) * 1000 + 500;
            setTimeout(() => {
                if (!mergeTriggered) {
                    aiFinished = true; iaFinished = true;
                    triggerMerge();
                }
            }, safetyTimeoutMerge);

            const textAnimEndTime = (
                parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--anim-duration-merge')) +
                parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--anim-duration-symbol-appear')) +
                parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--anim-delay-text')) +
                parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--anim-duration-text-appear'))
            ) * 1000;
            const safetyTimeoutLogin = safetyTimeoutMerge + textAnimEndTime + 500;
            setTimeout(() => {
                if (mergeTriggered && !textFinished) {
                    handleTextEnd();
                }
            }, safetyTimeoutLogin);
        });
    </script>
</body>
</html>